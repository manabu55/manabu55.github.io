<!DOCTYPE html>
<html lang="ja">

<head>
    <!-- 既存のメタタグ -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily 1-3-5 - シンプルで効果的なタスク管理アプリ</title>
    <meta name="description" content="Daily 1-3-5は1日のタスクを1つの重要タスク、3つの中タスク、5つの小タスクで管理できる、シンプルで効果的なタスク管理アプリです。">
    <meta name="keywords" content="タスク管理,ToDo,1-3-5ルール,生産性向上,時間管理">
    <!-- セキュリティヘッダーの追加 -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; 
    style-src 'self' https://fonts.googleapis.com 'unsafe-inline'; 
    font-src 'self' https://fonts.gstatic.com;
    script-src 'self' 'unsafe-inline' https://www.googletagmanager.com;
    img-src 'self' data: https:;">
    <!-- OGP -->
    <meta property="og:title" content="Daily 1-3-5 - シンプルで効果的なタスク管理アプリ">
    <meta property="og:description" content="1-3-5ルールで毎日のタスクを効率的に管理。生産性向上をサポートします。">
    <meta property="og:image" content="https://example.com/images/og-image.png">
    <meta property="og:type" content="website">

    <!-- アプリアイコン -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" href="images/icons/app-icon.png">
    <link rel="apple-touch-icon" href="images/icons/app-icon.png">
    <link rel="icon" type="image/png" sizes="384x384" href="images/icons/app-icon@2x.png">

    <!-- テーマカラー -->
    <meta name="theme-color" content="#E8F5E9">

    <!-- iOS用設定 -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Daily 1-3-5">

    <!-- スタイルシート -->
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-9QJ2JHJ1XF"></script>
    <!-- スライドショー用スクリプト -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const screenshots = document.querySelectorAll('.app-preview');
            let currentIndex = 0;
            const intervalTime = 3000; // 3秒

            function showNextScreenshot() {
                screenshots[currentIndex].classList.remove('active');
                currentIndex = (currentIndex + 1) % screenshots.length;
                screenshots[currentIndex].classList.add('active');
            }

            if (screenshots.length > 0) {
                screenshots[0].classList.add('active');
                setInterval(showNextScreenshot, intervalTime);
            }
        });
    </script>

    <!-- Google Analytics -->
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-9QJ2JHJ1XF');
    </script>

    <script>
        // Service Worker は本番環境でのみ有効化
        if (location.protocol === 'https:') {
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', () => {
                    navigator.serviceWorker.register('/sw.js')
                        .then(registration => {
                            console.log('ServiceWorker registration successful');
                        })
                        .catch(err => {
                            console.log('ServiceWorker registration failed: ', err);
                        });
                });
            }
        }

        // オフライン検出（こちらは有効のまま）
        window.addEventListener('online', updateOnlineStatus);
        window.addEventListener('offline', updateOnlineStatus);

        function updateOnlineStatus(event) {
            const status = navigator.onLine ? 'オンライン' : 'オフライン';
            const notification = document.createElement('div');
            notification.className = `connection-status ${status.toLowerCase()}`;
            notification.textContent = status;

            const existingNotification = document.querySelector('.connection-status');
            if (existingNotification) {
                existingNotification.remove();
            }

            document.body.appendChild(notification);
            setTimeout(() => notification.remove(), 3000);
        }
    </script>
</head>

<body>
    <!-- スキップリンク -->
    <a href="#main-content" class="skip-link">メインコンテンツにスキップ</a>

    <header role="banner">
        <div class="container header-content">
            <div class="logo" role="heading" aria-level="1">
                <a href="index.html" aria-label="Daily 1-3-5 ホーム">
                    <img src="images/icons/app-icon.png" alt="" class="logo-icon" aria-hidden="true">
                    <span class="logo-text">Daily 1-3-5</span>
                </a>
            </div>
            <nav role="navigation" aria-label="メインナビゲーション">
                <button class="menu-toggle" aria-expanded="false" aria-controls="main-menu" aria-label="メニュー">
                    <span class="menu-icon"></span>
                </button>
                <ul id="main-menu">
                    <li><a href="#features">機能</a></li>
                    <li><a href="#download">ダウンロード</a></li>
                    <li><a href="privacy.html">プライバシーポリシー</a></li>
                    <li><a href="terms.html">利用規約</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main id="main-content" role="main">
        <section class="hero" aria-labelledby="hero-title">
            <div class="hero-background" aria-hidden="true"></div>
            <div class="container hero-content">
                <div class="hero-text">
                    <h1 id="hero-title" class="gradient-text">Daily 1-3-5</h1>
                    <p class="hero-subtitle">タスク管理を、もっとシンプルに。</p>
                    <p class="hero-description">1つの重要タスク、3つの中タスク、5つの小タスクで<br>1日のタスクを整理。シンプルな画面で集中力を高めます</p>
                    <div class="hero-cta">
                        <a href="#download" class="cta-button">今すぐ始める</a>
                        <a href="#features" class="secondary-button">機能を見る</a>
                    </div>
                </div>
                <div class="hero-image" aria-hidden="true">
                    <div class="phone-mockup">
                        <div class="screenshot-container">
                            <img src="images/app-screenshot-1.png" alt="" class="app-preview active" loading="lazy">
                            <img src="images/app-screenshot-2.png" alt="" class="app-preview" loading="lazy">
                            <img src="images/app-screenshot-3.png" alt="" class="app-preview" loading="lazy">
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="features" class="features" aria-labelledby="features-title">
            <div class="container">
                <h2 id="features-title" class="section-title">主な機能</h2>
                <p class="section-subtitle">シンプルだからこそ、効果的。</p>
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path
                                    d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4" />
                            </svg>
                        </div>
                        <h3>1-3-5ルール対応</h3>
                        <p>タスクを3段階の優先度で整理し、重要な作業に集中できます。</p>
                        <div class="feature-detail">
                            <ul>
                                <li>最重要タスクを1つに絞り込み</li>
                                <li>中優先度タスクを3つまで設定</li>
                                <li>その他のタスクは5つまでに制限</li>
                            </ul>
                        </div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path
                                    d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                            </svg>
                        </div>
                        <h3>カレンダー連携</h3>
                        <p>日付ごとのタスクをカレンダーで一覧表示。過去の履歴も確認できます。</p>
                        <div class="feature-detail">
                            <ul>
                                <li>タスクの完了状況をマーク表示</li>
                                <li>日付間のタスク移動が可能</li>
                                <li>完了済みタスクの履歴確認</li>
                            </ul>
                        </div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                            </svg>
                        </div>
                        <h3>シンプル操作</h3>
                        <p>シンプルな画面構成で、操作に迷わずタスク管理に集中できます。</p>
                        <div class="feature-detail">
                            <ul>
                                <li>左右スワイプで日付切り替え</li>
                                <li>タップでタスクの詳細確認</li>
                                <li>チェックボックスで即時完了</li>
                            </ul>
                        </div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path
                                    d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                            </svg>
                        </div>
                        <h3>安全なデータ管理</h3>
                        <p>タスクデータをデバイス内に暗号化して保存します。</p>
                        <div class="feature-detail">
                            <ul>
                                <li>データの暗号化で情報を保護</li>
                                <li>ローカル保存で即時反映</li>
                                <li>端末内で完結する安全設計</li>
                            </ul>
                        </div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path
                                    d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" />
                            </svg>
                        </div>
                        <h3>カスタマイズ機能</h3>
                        <p>使いやすさを重視した表示設定をカスタマイズできます。</p>
                        <div class="feature-detail">
                            <ul>
                                <li>明暗2種類のテーマ切替</li>
                                <li>タスクごとの色分け機能</li>
                                <li>文字サイズの調整</li>
                            </ul>
                        </div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M15 3h4a2 2 0 012 2v14a2 2 0 01-2 2h-4M10 17l5-5-5-5M13 12H3" />
                            </svg>
                        </div>
                        <h3>オフライン対応</h3>
                        <p>インターネット接続なしでも快適に使えます。</p>
                        <div class="feature-detail">
                            <ul>
                                <li>インターネット不要で即時動作</li>
                                <li>データをローカルに安全保存</li>
                                <li>暗号化でプライバシーを保護</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="download" class="download" aria-labelledby="download-title">
            <div class="container">
                <h2 id="download-title" class="section-title">ダウンロード</h2>
                <p class="section-subtitle">App Storeにて公開準備中です</p>
                <div class="download-buttons">
                    <a href="#" class="store-link" aria-label="App Storeからダウンロード（近日公開）">
                        <img src="images/app-store-badge.png" alt="Download on the App Store" class="store-badge">
                    </a>
                </div>
            </div>
        </section>
    </main>

    <footer role="contentinfo">
        <div class="container">
            <nav class="footer-links" aria-label="フッターナビゲーション">
                <a href="index.html">機能</a>
                <a href="#download">ダウンロード</a>
                <a href="privacy.html">プライバシーポリシー</a>
                <a href="terms.html">利用規約</a>
            </nav>
            <p class="copyright">© 2025 まなぶ合同会社 All rights reserved.</p>
        </div>
    </footer>

    <!-- オフライン対応スクリプト -->
    <script>
        // Service Workerの登録
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('ServiceWorker registration successful');
                    })
                    .catch(err => {
                        console.log('ServiceWorker registration failed: ', err);
                    });
            });
        }

        // オフライン検出
        window.addEventListener('online', updateOnlineStatus);
        window.addEventListener('offline', updateOnlineStatus);

        function updateOnlineStatus(event) {
            const status = navigator.onLine ? 'オンライン' : 'オフライン';
            const notification = document.createElement('div');
            notification.className = `connection-status ${status.toLowerCase()}`;
            notification.textContent = status;

            // 既存の通知があれば削除
            const existingNotification = document.querySelector('.connection-status');
            if (existingNotification) {
                existingNotification.remove();
            }

            document.body.appendChild(notification);

            // 3秒後に通知を消す
            setTimeout(() => notification.remove(), 3000);
        }
    </script>
</body>

</html>